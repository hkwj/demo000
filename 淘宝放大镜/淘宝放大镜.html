<!doctype html>
<html>
<head>
<meta charset="utf-8">
<style>
{margin:0; padding:0; list-style:none;}
#div1{
	width:310px; height:310px; position:relative;
}
.img1{width:100%; height:100%;}
#div2{
	width:310px; height:310px; position:absolute; 
	left:350px; top:0; border:1px solid #333; 
	overflow:hidden; display:none;
}
#mark{
	width:60px; height:60px; background:green;
	opacity:0.6; position:absolute; left:0; top:0;
	display:none;
}
#div2 img{
	position:absolute; left:0; top:0;
}
</style>

</head>

<body>
<div id="div1">
	<img src="b1.jpg" alt="小图" class="img1">
	<div id="mark"></div>
	<div id="div2">
		<img src="b1.jpg" alt="大图" id="bigImg">
	</div>
</div>




<script>
var oDiv1=document.getElementById('div1');
var oDiv2=document.getElementById('div2');
var oMark=document.getElementById('mark');
var oBigImg=document.getElementById('bigImg');

oDiv1.onmouseover=function(){
	oDiv2.style.display=oMark.style.display='block';
};
oDiv1.onmouseout=function(){
	oDiv2.style.display=oMark.style.display='none';
}
oDiv1.onmousemove=function(ev){
	var oEvt=ev||event;
	var l=oEvt.clientX-oMark.offsetWidth/2;
	var t=oEvt.clientY-oMark.offsetHeight/2;

	if(l<0) l=0;
	if(l>oDiv1.offsetWidth-oMark.offsetWidth){
		l=oDiv1.offsetWidth-oMark.offsetWidth;
	};
	if(t<0) t=0;
	if(t>oDiv1.offsetHeight-oMark.offsetHeight){
		t=oDiv1.offsetHeight-oMark.offsetHeight;
	}

	oMark.style.left=l+'px';
	oMark.style.top=t+'px';

	oBigImg.style.left=-oMark.offsetLeft/(oDiv1.offsetWidth-oMark.offsetWidth)*(oBigImg.offsetWidth-oDiv2.offsetWidth)+'px';
	oBigImg.style.top=-oMark.offsetTop/(oDiv1.offsetHeight-oMark.offsetHeight)*(oBigImg.offsetHeight-oDiv2.offsetHeight)+'px';

}
</script>
</body>
</html>
